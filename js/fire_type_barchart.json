{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Causes of all fires since 1980",
  "width": "container",
  "height": 500,
  "data": {
    "url": "data/tas_fires.csv"
  },
  "transform": [
    {"calculate": "substring(datum.INCD_START, 1, 5)", "as": "start_year"},
    {"calculate": "substring(datum.INCD_START, 6, 8)", "as": "start_month"},
    {"calculate": "substring(datum.INCD_START, 1, 11)", "as": "start_date"},
    {"calculate": "substring(datum.INCD_END, 1, 11)", "as": "end_date"},
    {"calculate": "datum.SHAPE_AREA / 1000000", "as": "area_km"}
  ],
  "layer": [
    {
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "IGN_CAUSE1",
          "type": "nominal",
          "title": "Fire cause",
          "axis": {"labelAngle":0},
          "sort": {
            "op": "sum",
            "field": "SHAPE_AREA",
            "order": "descending"
          }
        },
        "y": {
          "field": "area_km",
          "title": "Area burned (Square km)",
          "type": "quantitative",
          "aggregate": "sum"
        },
        "color": {
          "field": "IGN_CAUSE1",
          "title": "",
          "type": "nominal",
          "legend": null,
          "scale": {
            "domain": [
              "Natural",
              "Accidental",
              "Undetermined",
              "Deliberate",
              "Planned Burn"
              
            ],
            "range": [
              "#a3acb9",
              "#1170aa",
              "#57606c",
              "#c85200", 
              "#a3cce9"
            ]
          }
        },    
        "tooltip": [
          {"field": "IGN_CAUSE1", "type": "nominal", "title": "Cause"},
          {"field": "area_km", "type": "quantitative", "title": "Area Burned (km^2)", "aggregate": "sum", "format": ".2f"}
        ]
      }
    }
  ],
  "config": {
    "title": {
      "fontSize": 30
    },
    "view": {
      "stroke":"transparent"
    },
    "background":"whitesmoke",
    "axis": {
      "gridColor": "whitesmoke",
      "gridOpacity": 0.2,
      "labelFontSize": 14,
      "titleFontSize": 20
    },
    "bar": {
      "stroke": "lightslategray",
      "strokeWidth": 1
    },
    "font": "exo"
  }
}
